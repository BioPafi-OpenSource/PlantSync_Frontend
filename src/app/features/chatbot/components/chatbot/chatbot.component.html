<mat-card class="chatbot-card">
    <div class="chat-content">
        <!-- Área de mensajes -->
        <div class="messages-container">
            <app-chatbot-message
                    *ngFor="let message of messages"
                    [text]="message.text"
                    [sender]="message.sender">
            </app-chatbot-message>
        </div>

        <!-- Opciones del bot (solo si no hay selector visible y no estamos al final) -->
        <div class="options-container" *ngIf="!showPlantSelector && !showResetButton">
            <button mat-raised-button
                    *ngFor="let option of botOptions"
                    (click)="selectOption(option)"
                    class="option-button">
                {{option}}
            </button>
        </div>

        <!-- Selector de plantas -->
        <div class="plant-selector" *ngIf="showPlantSelector">
            <mat-form-field appearance="outline">
                <mat-label>Selecciona una planta</mat-label>
                <mat-select [(ngModel)]="selectedPlantId">
                    <mat-option *ngFor="let plant of plants" [value]="plant.id">
                        {{plant.name}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
            <button mat-raised-button
                    color="primary"
                    (click)="onPlantSelected()"
                    [disabled]="!selectedPlantId"
                    class="send-button">
                Enviar
            </button>
        </div>

        <!-- Botón OK (solo al final) -->
        <div class="reset-container" *ngIf="showResetButton">
            <button mat-raised-button
                    color="primary"
                    (click)="resetConversation()"
                    class="ok-button">
                OK
            </button>
        </div>
    </div>
</mat-card>